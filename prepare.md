# es
## es环境：

创建一个网络，同一个网络的内的容器，可以通过localhost:port 通信,方便kibana访问es
`docker network create somenetwork`

安装elasticsearch
`docker run -d --name elasticsearch --net somenetwork -p 9200:9200 -p 9300:9300 -e "discovery.type=single-node" elasticsearch:7.6.2`

安装es查询工具dejavu
`docker run -p 1358:1358 -d --name dejavu appbaseio/dejavu`

安装es监控工具
`docker run -d --name cerebro -p 9000:9000 lmenezes/cerebro`

安装kibana查询工具
`docker run -d --name kibana --net somenetwork -p 5601:5601 kibana:7.6.2`
## 1.存储文件版本号时，es相对于mysql、redis的优势是什么

1. 搜索性能：ES是面向文本搜索的NoSQL数据库，其全文搜索和分词能力更强大。因此，如果需要对文件版本号进行搜索和查询，ES会更适合。

2. 可扩展性：ES是一个分布式系统，可以将数据分布在多个节点上，从而支持横向扩展。因此，如果需要处理大量的文件和版本号，ES可以更好地处理这些数据。

3. 实时性：ES支持实时索引和搜索，这意味着当新的文件版本号添加到ES中时，它们可以立即被搜索到。相比之下，MySQL通常需要执行一些操作，如提交事务或刷新缓存，才能使新的版本号可用。Redis需要通过定期将数据写入磁盘来确保数据的可靠性，这可能会导致一些数据的延迟。

4. 大数据量处理：ES可以处理海量数据，因为它使用倒排索引来存储数据，而不是使用传统的哈希表或者B树索引。这种索引方式可以更快地访问和检索大量数据。

5. 多数据类型支持：ES支持多种数据类型，包括文本、数字、日期、地理位置等。这使得它可以处理不同类型的文件和版本号数据，而MySQL则更适合处理结构化数据，Redis则更适合处理简单的键值存储数据。

6. 数据持久化：虽然Redis支持数据持久化，但是ES的持久化机制更加可靠。ES将数据写入磁盘，以确保数据的可靠性。相比之下，Redis的持久化机制依赖于操作系统的缓存机制，如果系统崩溃或断电，可能会导致数据丢失。

## 2.es的持久化支持和mysql相比如何

Elasticsearch（ES）和MySQL是两种不同类型的数据库，它们在持久化方面的设计和实现方式也不同：

1. MySQL是一种关系型数据库，它使用传统的B树索引和数据表进行数据存储。MySQL使用基于日志的复制和事务日志来实现持久化，它将数据写入磁盘，以确保数据的可靠性。

2. ES是一种文档型数据库，它使用倒排索引和分片机制来存储数据。ES也支持持久化，它使用Lucene作为底层引擎，将数据写入磁盘来保证数据的可靠性。

3. 虽然ES的持久化机制和MySQL的持久化机制不同，但是ES的持久化能力可以做到和MySQL一样优秀。ES提供了两种持久化方式：translog（事务日志）和snapshot（快照）。translog记录对数据的所有更改操作，并将其写入磁盘，以确保数据的可靠性。snapshot则将整个索引或分片写入磁盘，以便在需要时进行恢复。

4. ES还支持多种副本和分片机制来保证数据的高可用性和可靠性。这些复制和分片机制可以确保在节点故障或数据中心故障的情况下，数据仍然可以可靠地访问和恢复。

因此，虽然ES和MySQL的持久化机制不同，但ES的持久化能力可以做到与MySQL一样优秀，可以保证数据的可靠性和高可用性。
